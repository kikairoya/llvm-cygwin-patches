From d9571965c61236af01bbd2449add0e2c71f1cdf5 Mon Sep 17 00:00:00 2001
From: kikairoya <kikairoya@gmail.com>
Date: Tue, 10 Jun 2025 21:42:25 +0900
Subject: [PATCH 29/36] [LIT][Cygwin] Don't add `-gnu` to make Itanium ABI
 triple for *-cygwin

It is already Itanium ABI one.
---
 llvm/utils/lit/lit/llvm/config.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/llvm/utils/lit/lit/llvm/config.py b/llvm/utils/lit/lit/llvm/config.py
index 913ba69d6332..280fc7701c33 100644
--- a/llvm/utils/lit/lit/llvm/config.py
+++ b/llvm/utils/lit/lit/llvm/config.py
@@ -380,8 +380,8 @@ class LLVMConfig(object):
             self.lit_config.fatal(
                 "Could not turn '%s' into Itanium ABI triple" % triple
             )
-        if m.group(3).lower() != "windows":
-            # All non-windows triples use the Itanium ABI.
+        if m.group(3).lower() != "windows" or re.match(r"-cyg.*", triple):
+            # All non-Windows (including Cygwin) triples use the Itanium ABI.
             return triple
         return m.group(1) + "-" + m.group(2) + "-" + m.group(3) + "-gnu"
 
-- 
2.51.2

