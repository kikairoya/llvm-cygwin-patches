From 86d1c50dd0544da752cf28608f04df671ff41c8d Mon Sep 17 00:00:00 2001
From: kikairoya <kikairoya@gmail.com>
Date: Sun, 30 Nov 2025 07:43:31 +0900
Subject: [PATCH 14/43] update test

---
 ...from_explicit_instantiation.exclude_from_dllimport.cpp | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/clang/test/CodeGenCXX/attr-exclude_from_explicit_instantiation.exclude_from_dllimport.cpp b/clang/test/CodeGenCXX/attr-exclude_from_explicit_instantiation.exclude_from_dllimport.cpp
index c80c60c4dd443741943da8d3c226b720b9e9ca4a..b199eaa1afee27b75f1e0cf76e64eac6cf875ade 100644
--- a/clang/test/CodeGenCXX/attr-exclude_from_explicit_instantiation.exclude_from_dllimport.cpp
+++ b/clang/test/CodeGenCXX/attr-exclude_from_explicit_instantiation.exclude_from_dllimport.cpp
@@ -40,7 +40,7 @@ template <class T>
 struct D {
   // For the MSVC ABI: this constructor causes implicit instantiation of
   // the VTable, which triggers instantiating all virtual member functions
-  // regardless `exclude_from_explicit_instantiation` (currently not).
+  // regardless `exclude_from_explicit_instantiation`.
   // For the Itanium ABI: Emitting the VTable is suppressed by implicit
   // instantiation declaration so virtual member functions won't be instantiated.
   EXCLUDE_FROM_EXPLICIT_INSTANTIATION explicit D(int);
@@ -68,6 +68,8 @@ template <class T> void D<T>::to_be_imported() noexcept {}
 template <class T> void D<T>::to_be_instantiated() noexcept {}
 
 // MSC: $"?not_to_be_imported@?$C@H@@QEAAXXZ" = comdat any
+// MSC: $"?to_be_instantiated@?$D@H@@UEAAXXZ" = comdat any
+// MSC: $"?to_be_instantiated@?$D@I@@UEAAXXZ" = comdat any
 // GNU: $_ZN1CIiE18not_to_be_importedEv = comdat any
 // GNU: @_ZTV1DIiE = external dllimport unnamed_addr
 // GNU: @_ZTV1DIjE = external unnamed_addr
@@ -127,9 +129,9 @@ void use() {
 // GNU: define linkonce_odr dso_local void @_ZN1DIjEC2Ei
 
 // MSC: declare dllimport void @"?to_be_imported@?$D@H@@UEAAXXZ"
-// MSC: declare dso_local void @"?to_be_instantiated@?$D@H@@UEAAXXZ"
+// MSC: define linkonce_odr dso_local void @"?to_be_instantiated@?$D@H@@UEAAXXZ"
 // MSC: declare dllimport void @"?to_be_imported_explicitly@?$D@H@@UEAAXXZ"
 
 // MSC: declare dso_local void @"?to_be_imported@?$D@I@@UEAAXXZ"
-// MSC: declare dso_local void @"?to_be_instantiated@?$D@I@@UEAAXXZ"
+// MSC: define linkonce_odr dso_local void @"?to_be_instantiated@?$D@I@@UEAAXXZ"
 // MSC: declare dllimport void @"?to_be_imported_explicitly@?$D@I@@UEAAXXZ"
-- 
2.51.2

