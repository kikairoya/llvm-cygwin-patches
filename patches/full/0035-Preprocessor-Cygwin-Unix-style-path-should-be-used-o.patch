From 3533bf5dfa9e6284414f463bdb0c13bb580d96b8 Mon Sep 17 00:00:00 2001
From: kikairoya <kikairoya@gmail.com>
Date: Mon, 19 May 2025 20:49:59 +0900
Subject: [PATCH 35/37] [Preprocessor][Cygwin] Unix-style path should be used
 on Cygwin

---
 clang/lib/Lex/PPMacroExpansion.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/clang/lib/Lex/PPMacroExpansion.cpp b/clang/lib/Lex/PPMacroExpansion.cpp
index 5efa4b5b3f87..a4c6f4db038e 100644
--- a/clang/lib/Lex/PPMacroExpansion.cpp
+++ b/clang/lib/Lex/PPMacroExpansion.cpp
@@ -2076,7 +2076,8 @@ void Preprocessor::processPathForFileMacro(SmallVectorImpl<char> &Path,
                                            const TargetInfo &TI) {
   LangOpts.remapPathPrefix(Path);
   if (LangOpts.UseTargetPathSeparator) {
-    if (TI.getTriple().isOSWindows())
+    if (TI.getTriple().isOSWindows() &&
+        !TI.getTriple().isWindowsCygwinEnvironment())
       llvm::sys::path::remove_dots(Path, false,
                                    llvm::sys::path::Style::windows_backslash);
     else
-- 
2.51.2

