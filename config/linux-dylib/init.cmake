include("${CMAKE_CURRENT_LIST_DIR}/../common.cmake")
if ("${CMAKE_SOURCE_DIR}" MATCHES "/runtimes$")
  include("${CMAKE_SOURCE_DIR}/../cmake/Modules/LLVMVersion.cmake")
  set(COMPILER_RT_INSTALL_LIBRARY_DIR "lib/clang/${LLVM_VERSION_MAJOR}/lib/linux" CACHE PATH "" FORCE)
  set(LIBCXX_INCLUDE_BENCHMARKS OFF CACHE BOOL "" FORCE)
  set(LLVM_ENABLE_RUNTIMES "libcxx;libcxxabi;libunwind;compiler-rt" CACHE STRING "" FORCE)
else()
  set(LLVM_ENABLE_PROJECTS "polly;lld;clang;clang-tools-extra" CACHE STRING "" FORCE)
  set(LLVM_ENABLE_RUNTIMES "" CACHE STRING "" FORCE)
  #if (IS_DIRECTORY "${CMAKE_BINARY_DIR}/../build-llvm-$ENV{BUILD_NAME}")
  #  set(LLVM_CMAKE_DIR "${CMAKE_BINARY_DIR}/../build-llvm-$ENV{BUILD_NAME}/lib/cmake" CACHE STRING "" FORCE)
  #  set(LLVM_DIR "${CMAKE_BINARY_DIR}/../build-llvm-$ENV{BUILD_NAME}" CACHE STRING "" FORCE)
  #  if (IS_DIRECTORY "${CMAKE_BINARY_DIR}/../build-clang-$ENV{BUILD_NAME}")
  #    set(Clang_DIR "${CMAKE_BINARY_DIR}/../build-clang-$ENV{BUILD_NAME}" CACHE STRING "" FORCE)
  #  else()
  #    set(Clang_DIR "${CMAKE_BINARY_DIR}/../build-llvm-$ENV{BUILD_NAME}" CACHE STRING "" FORCE)
  #  endif()
  #else()
  #  set(LLVM_INSTALL_GTEST ON CACHE BOOL "" FORCE)
  #endif()
endif()
set(CLANG_DEFAULT_LINKER "lld" CACHE STRING "" FORCE)
set(LLVM_ENABLE_BINDINGS OFF CACHE BOOL "" FORCE)
set(LLVM_ENABLE_LLD ON CACHE BOOL "" FORCE)
#set(LLVM_EXTERNAL_CLANG_TOOLS_EXTRA_SOURCE_DIR "${CMAKE_SOURCE_DIR}/../clang-tools-extra" CACHE STRING "" FORCE)
set(LLVM_INCLUDE_DOCS OFF CACHE BOOL "" FORCE)
set(LLVM_INCLUDE_EXAMPLES OFF CACHE BOOL "" FORCE)
set(LLVM_INCLUDE_TESTS ON CACHE BOOL "" FORCE)
set(LLVM_INSTALL_UTILS ON CACHE BOOL "" FORCE)
set(LLVM_LINK_LLVM_DYLIB ON CACHE BOOL "" FORCE)
set(LLVM_LIT_ARGS "-v --timeout 1200 --max-time 19800" CACHE STRING "" FORCE)
set(LLVM_TARGETS_TO_BUILD "all" CACHE STRING "" FORCE)
