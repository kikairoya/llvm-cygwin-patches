From f42b401a98e055a51df7ac0c5f02a5b0ea0272ae Mon Sep 17 00:00:00 2001
From: kikairoya <kikairoya@gmail.com>
Date: Tue, 10 Jun 2025 21:42:25 +0900
Subject: [PATCH 43/54] [LIT][Cygwin] Don't add `-gnu` to make Itanium ABI
 triple for *-cygwin

It is already Itanium ABI one.
---
 llvm/utils/lit/lit/llvm/config.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/llvm/utils/lit/lit/llvm/config.py b/llvm/utils/lit/lit/llvm/config.py
index 28a7ab25a0c3b272ecd53a8070c311eceaf8adc4..f49b1d03268f741ba9b171921e65185abafc3d8f 100644
--- a/llvm/utils/lit/lit/llvm/config.py
+++ b/llvm/utils/lit/lit/llvm/config.py
@@ -413,8 +413,8 @@ class LLVMConfig(object):
             self.lit_config.fatal(
                 "Could not turn '%s' into Itanium ABI triple" % triple
             )
-        if m.group(3).lower() != "windows":
-            # All non-windows triples use the Itanium ABI.
+        if m.group(3).lower() != "windows" or re.match(r"-cyg.*", triple):
+            # All non-Windows (including Cygwin) triples use the Itanium ABI.
             return triple
         return m.group(1) + "-" + m.group(2) + "-" + m.group(3) + "-gnu"
 
-- 
2.52.0

