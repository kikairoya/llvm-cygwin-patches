From 35b0f40717e9deeafca170baf82c4ff1ac36011e Mon Sep 17 00:00:00 2001
From: kikairoya <kikairoya@gmail.com>
Date: Sat, 20 Dec 2025 22:57:01 +0900
Subject: [PATCH 66/70] [LLD][Test][Cygwin] Diverge expected result

---
 lld/test/COFF/driver-windows.test                 | 2 +-
 lld/test/COFF/lto-cache-errors.ll                 | 1 +
 lld/test/MachO/invalid/invalid-lto-object-path.ll | 1 +
 lld/test/MachO/lto-emit-llvm.ll                   | 2 +-
 4 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/lld/test/COFF/driver-windows.test b/lld/test/COFF/driver-windows.test
index 407da16359bf0c9c4df88fd43cd17284a677f1b3..43b804fcd805e17024d09f7fb45daa89093e749b 100644
--- a/lld/test/COFF/driver-windows.test
+++ b/lld/test/COFF/driver-windows.test
@@ -1,3 +1,3 @@
-# REQUIRES: system-windows
+# REQUIRES: system-windows || system-cygwin
 # RUN: env LLD_IN_TEST=1 not LLD-LINK 2>&1 | FileCheck %s
 CHECK: no input files
diff --git a/lld/test/COFF/lto-cache-errors.ll b/lld/test/COFF/lto-cache-errors.ll
index a46190a81b6230de3c158e0b62b4a6e02ec19bf5..fbec7d2a19fd1c11857c48b04c08a9bee677e50b 100644
--- a/lld/test/COFF/lto-cache-errors.ll
+++ b/lld/test/COFF/lto-cache-errors.ll
@@ -1,6 +1,7 @@
 ; REQUIRES: x86, non-root-user
 ;; Not supported on windows since we use permissions to deny the creation
 ; UNSUPPORTED: system-windows
+; UNSUPPORTED: system-cygwin
 
 ; RUN: opt -module-hash -module-summary %s -o %t.o
 ; RUN: opt -module-hash -module-summary %p/Inputs/lto-cache.ll -o %t2.o
diff --git a/lld/test/MachO/invalid/invalid-lto-object-path.ll b/lld/test/MachO/invalid/invalid-lto-object-path.ll
index c862538d592ce8d242f14338133e7a214fe638c4..00964fddd870aba71e4e4a3916abc6398d2119c7 100644
--- a/lld/test/MachO/invalid/invalid-lto-object-path.ll
+++ b/lld/test/MachO/invalid/invalid-lto-object-path.ll
@@ -2,6 +2,7 @@
 
 ;; Creating read-only directories with `chmod 400` isn't supported on Windows
 ; UNSUPPORTED: system-windows
+; UNSUPPORTED: system-cygwin
 
 ;; -object_path_lto specifies a directory that cannot be created
 ; RUN: rm -rf %t && mkdir %t && mkdir %t/dir
diff --git a/lld/test/MachO/lto-emit-llvm.ll b/lld/test/MachO/lto-emit-llvm.ll
index 77bf700837dfb8f9aecc262dd34e183b9ef3f939..6697c6868282896338914a1c38bb2d8a02f541de 100644
--- a/lld/test/MachO/lto-emit-llvm.ll
+++ b/lld/test/MachO/lto-emit-llvm.ll
@@ -3,7 +3,7 @@
 ; Check that the --lto-emit-llvm option is handled correctly.
 ;
 ; RUN: opt %s -o %t.o
-; RUN: ld.lld --lto-emit-llvm %t.o -o %t.out.o
+; RUN: %lld --lto-emit-llvm %t.o -o %t.out.o
 ; RUN: llvm-dis < %t.out.o -o - | FileCheck %s
 ;
 ; CHECK: define hidden void @main()
-- 
2.52.0

