From a7c052386e0efafb86ec3082ac737dfc1a85e14f Mon Sep 17 00:00:00 2001
From: kikairoya <kikairoya@gmail.com>
Date: Tue, 10 Jun 2025 21:42:25 +0900
Subject: [PATCH 29/39] [LIT][Cygwin] Don't add `-gnu` to make Itanium ABI
 triple for *-cygwin

It is already Itanium ABI one.
---
 llvm/utils/lit/lit/llvm/config.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/llvm/utils/lit/lit/llvm/config.py b/llvm/utils/lit/lit/llvm/config.py
index 59982c94b787ce3616d6975113f31c30e0d4e463..285402fbdc91d4b4f0b11d44f5090d03ae97ab92 100644
--- a/llvm/utils/lit/lit/llvm/config.py
+++ b/llvm/utils/lit/lit/llvm/config.py
@@ -383,8 +383,8 @@ class LLVMConfig(object):
             self.lit_config.fatal(
                 "Could not turn '%s' into Itanium ABI triple" % triple
             )
-        if m.group(3).lower() != "windows":
-            # All non-windows triples use the Itanium ABI.
+        if m.group(3).lower() != "windows" or re.match(r"-cyg.*", triple):
+            # All non-Windows (including Cygwin) triples use the Itanium ABI.
             return triple
         return m.group(1) + "-" + m.group(2) + "-" + m.group(3) + "-gnu"
 
-- 
2.51.2

