From c970fa4af14524439ef8200efdc7a681565c1aa6 Mon Sep 17 00:00:00 2001
From: kikairoya <kikairoya@gmail.com>
Date: Mon, 19 May 2025 20:49:59 +0900
Subject: [PATCH 37/38] [Preprocessor][Cygwin] Unix-style path should be used
 on Cygwin

---
 clang/lib/Lex/PPMacroExpansion.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/clang/lib/Lex/PPMacroExpansion.cpp b/clang/lib/Lex/PPMacroExpansion.cpp
index dd80ae586a1f..5e6718a8ef9a 100644
--- a/clang/lib/Lex/PPMacroExpansion.cpp
+++ b/clang/lib/Lex/PPMacroExpansion.cpp
@@ -2064,7 +2064,8 @@ void Preprocessor::processPathForFileMacro(SmallVectorImpl<char> &Path,
                                            const TargetInfo &TI) {
   LangOpts.remapPathPrefix(Path);
   if (LangOpts.UseTargetPathSeparator) {
-    if (TI.getTriple().isOSWindows())
+    if (TI.getTriple().isOSWindows() &&
+        !TI.getTriple().isWindowsCygwinEnvironment())
       llvm::sys::path::remove_dots(Path, false,
                                    llvm::sys::path::Style::windows_backslash);
     else
-- 
2.51.1

